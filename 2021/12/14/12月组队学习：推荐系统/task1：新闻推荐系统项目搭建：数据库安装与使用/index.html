<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="task1：新闻推荐系统项目搭建：数据库安装与使用"><meta name="keywords" content="推荐系统,数据库,前端开发"><meta name="author" content="zhxnlp"><meta name="copyright" content="zhxnlp"><title>task1：新闻推荐系统项目搭建：数据库安装与使用 | zhxnlpのBlog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"JU6VFRRZVF","apiKey":"ca17f8e20c4dc91dfe1214d03173a8be","indexName":"github-io","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '6.0.0'
} </script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="zhxnlpのBlog" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Mysql%E7%94%A8%E6%88%B7"><span class="toc-number">1.</span> <span class="toc-text">一、Mysql用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Mysql-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">二、Mysql-数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Mysql-%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">三、Mysql-表的基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%A1%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BF%AE%E6%94%B9"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 表的创建和修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%A1%A8%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 表的查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-SELECT%E8%AF%AD%E5%8F%A5%E6%9F%A5%E8%AF%A2%E5%92%8C%E7%AE%97%E5%BC%8F%E8%BF%90%E7%AE%97"><span class="toc-number">3.3.</span> <span class="toc-text">3.2. 1. SELECT语句查询和算式运算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-%E6%8C%87%E5%AE%9A%E6%9F%A5%E8%AF%A2%E5%92%8C%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.2.6 指定查询和比较运算符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="toc-number">3.4.</span> <span class="toc-text">3.3 表的复制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Mysql-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.</span> <span class="toc-text">四、Mysql-分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%AF%B9%E8%A1%A8%E5%88%86%E7%BB%84"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 对表分组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81redis%E5%AE%89%E8%A3%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.</span> <span class="toc-text">五、redis安装连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81redis%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">六、redis操作命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81MongoDB"><span class="toc-number">7.</span> <span class="toc-text">七、MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%AE%89%E8%A3%85MongoDB"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 安装MongoDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-Mongodb%E6%93%8D%E4%BD%9C"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 Mongodb操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1 数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2 创建集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-3-%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3"><span class="toc-number">7.2.3.</span> <span class="toc-text">7.2.3  插入文档</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-Python-MongoDB"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 Python MongoDB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81scrapy"><span class="toc-number">8.</span> <span class="toc-text">八、scrapy</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://img-blog.csdnimg.cn/92202ef591744a55a05a1fc7e108f4d6.png"></div><div class="author-info__name text-center">zhxnlp</div><div class="author-info__description text-center">nlp</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/zhxnlp">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">48</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">39</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">9</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://relph1119.github.io/my-team-learning">relph</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://ifwind.github.io/">ifwind</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://chuxiaoyu.cn/nlp-transformer-summary/">chuxiaoyu</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://img-blog.csdnimg.cn/ffe1f736be4548dc9101388503288e4d.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">zhxnlpのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">task1：新闻推荐系统项目搭建：数据库安装与使用</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-12-14</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/12%E6%9C%88%E7%BB%84%E9%98%9F%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">12月组队学习：推荐系统</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.1k</span><span class="post-meta__separator">|</span><span>阅读时长: 16 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>@[toc]</p>
<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/fun-rec/blob/master/docs/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98/2.2%E6%96%B0%E9%97%BB%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98/docs/2.2.1.1%20Mysql%E5%9F%BA%E7%A1%80.md">Mysql基础.md</a><br>本项目来自<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/fun-rec/tree/master/docs/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98/2.2%E6%96%B0%E9%97%BB%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98">《fun-rec/docs/第二章 推荐系统实战/2.2新闻推荐系统实战/》</a><br><a target="_blank" rel="noopener" href="https://share.weiyun.com/u3ZIjZfg">【交流分享-腾讯微云】</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"> vim /etc/resolv.conf</span><br><span class="line"><span class="comment">#Google</span></span><br><span class="line">nameserver <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">nameserver <span class="number">8.8</span><span class="number">.4</span><span class="number">.4</span></span><br><span class="line"></span><br><span class="line">conda activate</span><br></pre></td></tr></table></figure>
<ol>
<li><p>mysql命令</p>
<span id="more"></span>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">systemctl start mysqld<span class="comment">#启动mysql</span></span><br><span class="line">systemctl status mysqld.service<span class="comment">#查看mysql状态，running就是启动中</span></span><br><span class="line">systemctl stop mysqld.service<span class="comment">#关闭mysql服务</span></span><br><span class="line">mysql -u root -p <span class="comment">#登录mysql</span></span><br><span class="line">grep <span class="string">&quot;password&quot;</span> /var/log/mysqld.log<span class="comment">#查看密码，直接复制登录</span></span><br><span class="line">netstat -nlp <span class="comment">#查看是否映射成功</span></span><br></pre></td></tr></table></figure>
<p>安装成功后没有mysql服务报错 没有此服务<br>我们应该找到 自己的mysq安装文件夹（博主的mysql在“ /home/tool/mysql_5.7.22”）<br>将/home/tool/mysql_5.7.22/support-files/mysql.server 拷贝到 /etc/init.d/mysql</p>
</li>
<li><p>mongodb命令：</p>
</li>
</ol>
<ul>
<li>添加路径：<code>export PATH=/usr/local/mongodb/bin:$PATH</code></li>
<li>启动mongo服务：<code>mongod --dbpath /var/lib/mongo --logpath /var/log/mongodb/mongod.log --fork</code></li>
<li>通过 ps ax | grep mongod查看数据库启动情况，如下图表示启动成功：</li>
<li>关闭mongodb服务通过ps ax | grep mongod命令查看mongodb运行的id<br><img src="https://img-blog.csdnimg.cn/890bf81dcb7a4899886c3e77f3ec1a4e.png" alt="在这里插入图片描述"><br>然后输入kill -9 进程id，杀死mongodb服务，如上图执行命令</li>
</ul>
<ol>
<li>redis命令</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">systemctl start redis.service   <span class="comment">#启动redis服务</span></span><br><span class="line">systemctl stop redis.service   <span class="comment">#停止redis服务</span></span><br><span class="line">systemctl restart redis.service   <span class="comment">#重新启动服务</span></span><br><span class="line">systemctl status redis.service   <span class="comment">#查看服务当前状态</span></span><br><span class="line">systemctl enable redis.service   <span class="comment">#设置开机自启动</span></span><br><span class="line">systemctl disable redis.service   <span class="comment">#停止开机自启动</span></span><br></pre></td></tr></table></figure>
<h2 id="一、Mysql用户"><a href="#一、Mysql用户" class="headerlink" title="一、Mysql用户"></a>一、Mysql用户</h2><p>启动MySQL/重启</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@master software]<span class="comment"># service mysql start</span></span><br><span class="line">[root@master software]<span class="comment"># service mysql restart</span></span><br><span class="line">systemctl status mysqld.service<span class="comment">#查看mysql状态，running就是启动中</span></span><br><span class="line">systemctl stop mysqld.service<span class="comment">#关闭mysql服务</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#用户登录</span></span><br><span class="line">[root@master software]<span class="comment"># mysql -uroot -p</span></span><br><span class="line">mysql&gt; exit<span class="comment">#退出</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建用户</span></span><br><span class="line">CREATE USER <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;你的密码&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予admin用户全部的权限，你也可以只授予部分权限</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>监听不到mysql端口查看<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43671497/article/details/84931578?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E7%9C%8B%E4%B8%8D%E5%88%B0mysql%E7%AB%AF%E5%8F%A3&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-9-84931578.pc_search_insert_es_download_v2&amp;spm=1018.2226.3001.4187">帖子</a>。<br>即之前为了免密登陆在<code>vi /etc/my.cnf</code>打开mysql设置文件，在最后一行加了<code>skip-grant-tables</code>或<code>skip-network</code>导致3306端口无法被监听到。注释掉这句话之后重启mysql服务就行。</p>
<h2 id="二、Mysql-数据库"><a href="#二、Mysql-数据库" class="headerlink" title="二、Mysql-数据库"></a>二、Mysql-数据库</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td> CREATE DATABASE [IF NOT EXISTS] &lt;数据库名称&gt;;</td>
<td>查看数据库。IF NOT EXISTS（可选项）避免数据库重名</td>
</tr>
<tr>
<td> SHOW DATABASES [LIKE ‘数据库名’];;</td>
<td>查看所有存在的数据库</td>
</tr>
<tr>
<td>USE &lt;数据库名&gt;</td>
<td>选择数据库</td>
</tr>
<tr>
<td> DROP DATABASE [IF EXISTS] &lt;数据库名&gt;</td>
<td>删除数据库</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">CREATE DATABASE shop;<span class="comment">#创建名为shop的数据库。</span></span><br><span class="line">SHOW DATABASES;<span class="comment">#查看数据库</span></span><br><span class="line">SHOW CREATE DATABASE shop;<span class="comment">#查看创建的数据库shop</span></span><br><span class="line">DROP DATABASE shop;<span class="comment">#删除shop数据库</span></span><br></pre></td></tr></table></figure>
<h2 id="三、Mysql-表的基本操作"><a href="#三、Mysql-表的基本操作" class="headerlink" title="三、Mysql-表的基本操作"></a>三、Mysql-表的基本操作</h2><h3 id="3-1-表的创建和修改"><a href="#3-1-表的创建和修改" class="headerlink" title="3.1 表的创建和修改"></a>3.1 表的创建和修改</h3><p>创建表的语法结构如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &lt;表名&gt; （&lt;字段<span class="number">1</span>&gt; &lt;数据类型&gt; &lt;该列所需约束&gt;，</span><br><span class="line">   &lt;字段<span class="number">2</span>&gt; &lt;数据类型&gt; &lt;该列所需约束&gt;，</span><br><span class="line">   &lt;字段<span class="number">3</span>&gt; &lt;数据类型&gt; &lt;该列所需约束&gt;，</span><br><span class="line">   &lt;字段<span class="number">4</span>&gt; &lt;数据类型&gt; &lt;该列所需约束&gt;，</span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   &lt;该表的约束<span class="number">1</span>&gt;， &lt;该表的约束<span class="number">2</span>&gt;，……）；</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-- 创建一个名为Product的表</span><br><span class="line">CREATE TABLE Product(</span><br><span class="line">  product_id CHAR(<span class="number">4</span>) NOT NULL,</span><br><span class="line">  product_name VARCHAR(<span class="number">100</span>) NOT NULL,</span><br><span class="line">  product_type VARCHAR(<span class="number">32</span>) NOT NULL,</span><br><span class="line">  sale_price INT,</span><br><span class="line">  purchase_price INT,</span><br><span class="line">  regist_date DATE,</span><br><span class="line">  PRIMARY KEY (product_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>DESC Product;</td>
<td>查询表product</td>
</tr>
<tr>
<td>DROP TABLE &lt;表名&gt;;</td>
<td>删除表，无法恢复</td>
</tr>
<tr>
<td>rename命令：ALTER TABLE Student RENAME Students;</td>
<td>更新表名Student =&gt; Students。</td>
</tr>
<tr>
<td>add命令：ALTER TABLE Students ADD sex CHAR(1), ADD age INT;</td>
<td>插入字段，用逗号隔开</td>
</tr>
<tr>
<td>drop命令：ALTER TABLE Students DROP stu_num;</td>
<td>删除字段</td>
</tr>
<tr>
<td>modify命令：ALTER TABLE Students MODIFY age CHAR(3);</td>
<td>修改字段类型</td>
</tr>
<tr>
<td>change：ALTER TABLE Students CHANGE name stu_name CHAR(12);</td>
<td>修改字段名name =&gt;stu_name，数据类型改为CHAR(12)。</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-- 通过FIRST在表首插入字段stu_num</span><br><span class="line">ALTER TABLE Students ADD stu_num INT FIRST;</span><br><span class="line"></span><br><span class="line">-- 通过AFTER在字段sex后插入字段height</span><br><span class="line">ALTER TABLE Students ADD height INT AFTER sex;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-表的查询"><a href="#3-2-表的查询" class="headerlink" title="3.2 表的查询"></a>3.2 表的查询</h3><h3 id="3-2-1-SELECT语句查询和算式运算"><a href="#3-2-1-SELECT语句查询和算式运算" class="headerlink" title="3.2. 1. SELECT语句查询和算式运算"></a>3.2. 1. SELECT语句查询和算式运算</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT &lt;字段名&gt;, ……</span><br><span class="line"> FROM &lt;表名&gt;;</span><br><span class="line"><span class="comment">#查询全部字段</span></span><br><span class="line">SELECT *</span><br><span class="line"> FROM &lt;表名&gt;;</span><br></pre></td></tr></table></figure>
<ol>
<li>通过AS语句对展示的字段另起别名，这不会修改表内字段的名字：</li>
<li>设定汉语别名时需要使用双引号（”）括起来，英文字符则不需要:</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT  </span><br><span class="line">  product_id AS <span class="string">&quot;产品编号&quot;</span>,</span><br><span class="line">  product_type AS <span class="string">&quot;产品类型&quot;</span>  </span><br><span class="line"> FROM Product;</span><br></pre></td></tr></table></figure>
<p>可以在SELECT语句中使用计算表达式：<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  product_name,</span><br><span class="line">  sale_price,</span><br><span class="line">  sale_price * <span class="number">2</span> AS <span class="string">&quot;sale_price_x2&quot;</span></span><br><span class="line"> FROM Product;</span><br><span class="line"></span><br><span class="line">-- 结果如下</span><br><span class="line">+--------------+------------+---------------+</span><br><span class="line">| product_name | sale_price | sale_price_x2 |</span><br><span class="line">+--------------+------------+---------------+</span><br><span class="line">| T恤衫        |       <span class="number">1000</span> |          <span class="number">2000</span> |</span><br><span class="line">| 打孔器       |        <span class="number">500</span> |          <span class="number">1000</span> |</span><br><span class="line">| 运动T恤      |       <span class="number">4000</span> |          <span class="number">8000</span> |</span><br><span class="line">| 菜刀         |       <span class="number">3000</span> |          <span class="number">6000</span> |</span><br><span class="line">| 高压锅       |       <span class="number">6800</span> |         <span class="number">13600</span> |</span><br><span class="line">| 叉子         |        <span class="number">500</span> |          <span class="number">1000</span> |</span><br><span class="line">| 擦菜板       |        <span class="number">880</span> |          <span class="number">1760</span> |</span><br><span class="line">| 圆珠笔       |        <span class="number">100</span> |           <span class="number">200</span> |</span><br><span class="line">+--------------+------------+---------------+</span><br></pre></td></tr></table></figure></p>
<ol>
<li>常数的查询：SELECT子句中，除了可以写字段外，还可以写常数。即将查询的字段填入常数</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  <span class="string">&#x27;商品&#x27;</span> AS string,</span><br><span class="line">  <span class="string">&#x27;2009-05-24&#x27;</span> AS date,</span><br><span class="line">  product_id,</span><br><span class="line">  product_name</span><br><span class="line"> FROM Product;</span><br><span class="line">	</span><br><span class="line">-- 结果如下</span><br><span class="line">+--------+------------+------------+--------------+</span><br><span class="line">| string | date       | product_id | product_name |</span><br><span class="line">+--------+------------+------------+--------------+</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0001       | T恤衫        |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0002       | 打孔器       |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0003       | 运动T恤      |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0004       | 菜刀         |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0005       | 高压锅       |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0006       | 叉子         |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0007       | 擦菜板       |</span><br><span class="line">| 商品   | <span class="number">2009</span>-05-<span class="number">24</span> | 0008       | 圆珠笔       |</span><br><span class="line">+--------+------------+------------+--------------+</span><br><span class="line"><span class="number">8</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<ol>
<li>去重：在SELECT语句中使用DISTINCT可以去除重复行。<br>NULL 也被视为一类数据。NULL 存在于多行中时，会被合并为一条NULL 数据。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT </span><br><span class="line">    -&gt;   DISTINCT regist_date </span><br><span class="line">    -&gt;  FROM Product;</span><br><span class="line"></span><br><span class="line"><span class="comment">#原表regist_date 字段有三个重复的2009-09-20 </span></span><br></pre></td></tr></table></figure>
<p>多个字段组合删除：<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  DISTINCT product_type, regist_date</span><br><span class="line"> FROM Product;</span><br><span class="line"></span><br><span class="line"><span class="comment">#（删除product_type, regist_date都重复的商品）</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-2-6-指定查询和比较运算符"><a href="#3-2-6-指定查询和比较运算符" class="headerlink" title="3.2.6 指定查询和比较运算符"></a>3.2.6 指定查询和比较运算符</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT &lt;字段名&gt;, ……</span><br><span class="line">  FROM &lt;表名&gt;</span><br><span class="line"> WHERE &lt;条件表达式&gt;;</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT product_name</span><br><span class="line">  FROM Product</span><br><span class="line"> WHERE product_type = <span class="string">&#x27;衣服&#x27;</span>;</span><br><span class="line"> -- 结果如下</span><br><span class="line">+--------------+</span><br><span class="line">| product_name |</span><br><span class="line">+--------------+</span><br><span class="line">| T恤衫        |</span><br><span class="line">| 运动T恤      |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure>
<ul>
<li>WHERE 子句中通过使用比较运算符可以组合出各种各样的条件表达式。（&gt;&lt;=等等）不能对NULL使用任何比较运算符，只能通过IS NULL、IS NOT NULL语句来判断</li>
<li><p>字符串比较：按照字典顺序进行比较，也就是像姓名那样，按照条目在字典中出现的顺序来进行排序。例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span>  &lt; <span class="string">&#x27;10&#x27;</span> &lt; <span class="string">&#x27;11&#x27;</span> &lt; <span class="string">&#x27;2&#x27;</span> &lt; <span class="string">&#x27;222&#x27;</span> &lt; <span class="string">&#x27;3&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以使用逻辑运算符AND OR NOT。NULL和任何值做逻辑运算结果都是不确定（第三种真值UNKNOWN）。因此尽量给字段加上NOT NULL的约束。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT product_type, sale_price</span><br><span class="line">    FROM Product</span><br><span class="line">	WHERE product_type = <span class="string">&#x27;厨房用具&#x27;</span> </span><br><span class="line">	AND sale_price &gt;= <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-表的复制"><a href="#3-3-表的复制" class="headerlink" title="3.3 表的复制"></a>3.3 表的复制</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>CREATE TABLE Product_COPY1 SELECT * FROM Product;</td>
<td>从product表复制表Product_COPY1</td>
</tr>
<tr>
<td>CREATE TABLE Product_COPY1 LIKe Product;</td>
<td>通过LIKE复制表结构</td>
</tr>
</tbody>
</table>
</div>
<h2 id="四、Mysql-分组查询"><a href="#四、Mysql-分组查询" class="headerlink" title="四、Mysql-分组查询"></a>四、Mysql-分组查询</h2><h3 id="4-1-聚合函数"><a href="#4-1-聚合函数" class="headerlink" title="4.1 聚合函数"></a>4.1 聚合函数</h3><p>通过 SQL 对数据进行某种操作或计算时需要使用函数。</p>
<ul>
<li>COUNT：计算表中的记录数（行数）</li>
<li>SUM： 计算表中数值列中数据的合计值</li>
<li>AVG： 计算表中数值列中数据的平均值</li>
<li>MAX： 求出表中任意列中数据的最大值</li>
<li>MIN： 求出表中任意列中数据的最小值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT COUNT(*) FROM Product;<span class="comment">#其它的函数均不可以将*作为参数</span></span><br><span class="line">SELECT COUNT(purchase_price) FROM Product;<span class="comment">#字段名为参数，只会计算不包含NULL的行。AVG函数，计算时分母也不会算上NULL行。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>MAX/MIN函数几乎适用于所有数据类型的列，包括字符和日期。SUM/AVG函数只适用于数值类型的列。</li>
<li>在聚合函数删除重复值，DISTINCT必须写在括号中。这是因为必须要在计算行数之前删除 product_type 字段中的重复数据。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT product_type)</span><br><span class="line"> FROM Product;</span><br><span class="line"> </span><br><span class="line">-- 结果如下</span><br><span class="line">+------------------------------+</span><br><span class="line">| COUNT(DISTINCT product_type) |</span><br><span class="line">+------------------------------+</span><br><span class="line">|                            <span class="number">3</span> |</span><br><span class="line">+------------------------------+</span><br></pre></td></tr></table></figure>
<h3 id="4-2-对表分组"><a href="#4-2-对表分组" class="headerlink" title="4.2 对表分组"></a>4.2 对表分组</h3><p>类似pandas的group by语句，也是group by分组，语法结构如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT &lt;列名<span class="number">1</span>&gt;, &lt;列名<span class="number">2</span>&gt;, &lt;列名<span class="number">3</span>&gt;, ……</span><br><span class="line"> FROM &lt;表名&gt;</span><br><span class="line"> GROUP BY &lt;列名<span class="number">1</span>&gt;, &lt;列名<span class="number">2</span>&gt;, &lt;列名<span class="number">3</span>&gt;, ……;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT product_type, COUNT(*)</span><br><span class="line"> FROM Product</span><br><span class="line"> GROUP BY product_type;</span><br><span class="line"> </span><br><span class="line">-- 结果如下</span><br><span class="line">+--------------+----------+</span><br><span class="line">| product_type | COUNT(*) |</span><br><span class="line">+--------------+----------+</span><br><span class="line">| 衣服         |        <span class="number">2</span> |</span><br><span class="line">| 办公用品     |        <span class="number">2</span> |</span><br><span class="line">| 厨房用具     |        <span class="number">4</span> |</span><br><span class="line">+--------------+----------+</span><br></pre></td></tr></table></figure>
<ol>
<li><p>在该语句中，我们首先通过GROUP BY函数对指定的字段product_type进行分组。分组时，product_type字段中具有相同值的行会汇聚到同一组。</p>
</li>
<li><p>最后通过COUNT函数，统计不同分组的包含的行数。</p>
</li>
<li>NULL的数据会被聚合为一组。</li>
<li>语句顺序：1. SELECT → 2. FROM → 3. WHERE → 4. GROUP BY</li>
</ol>
<p>windows下安装PyMySQL：<code>python -m pip install PyMySQL</code><br>centos安装： <code>pip install PyMySQL</code></p>
<h2 id="五、redis安装连接"><a href="#五、redis安装连接" class="headerlink" title="五、redis安装连接"></a>五、redis安装连接</h2><p>redis安装地址：<a target="_blank" rel="noopener" href="https://redis.io/download">官网</a>，选择安装5.0.14。<br>参考文章<a target="_blank" rel="noopener" href="https://blog.csdn.net/username666/article/details/104687598?utm_source=app&amp;app_version=4.20.0&amp;code=app_1562916241&amp;uLinkId=usr1mkqgl919blen">《CentOS 7安装Redis5.0.7》</a>、<a target="_blank" rel="noopener" href="https://www.cnblogs.com/heqiuyong/p/10463334.html">《Centos7安装Redis》</a></p>
<ol>
<li>解压安装<br>解压：<code>tar -zxvf redis-5.0.14.tar.gz</code><br>进入目录后安装：<code>cd redis-5.0.14</code><br>先运行：<code>make</code><br>然后指定目录安装：<code>make install PREFIX=/usr/local/redis</code><br>第一次只编译了一次，没有redis -cli命令<br>==后来liunx系统时间不对。本地时间2021-12-14，liunx时间是2021-7-20。编译显示创建不完整，也是错误。==<br><img src="https://img-blog.csdnimg.cn/e0dfd02e23ac43b58d0b42c208ecaf3b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA56We5rSb5Y2O,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li>
</ol>
<ol>
<li>前台启动</li>
</ol>
<p>[root@localhost redis-5.0.3]# cd /usr/local/redis/bin/<br>[root@localhost bin]# ./redis-server<br>启动后如图所示：<br><img src="https://img-blog.csdnimg.cn/c599aad448364629a38ec1e9006bc4ce.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA56We5rSb5Y2O,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<p>==前台启动的时候exit没退出直接ctrl+z强行退出，结果其实redis服务一直没退，后面systemctl start redis.service、systemctl status redis.service一直显示redis状态没开，端口被占用。xshell重现连接才好的。==</p>
<ol>
<li>后台启动</li>
</ol>
<p>从 redis 的源码目录中复制 redis.conf 到 redis 的安装目录<br>[root@localhost bin]# cp /usr/local/redis-5.0.3/redis.conf /usr/local/redis/bin/</p>
<p>修改安装目录/usr/local/redis/bin/下的redis.conf配置文件：<code>vim redis.conf</code><br>修改以下配置：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#bind 127.0.0.1 # 将这行代码注释，监听所有的ip地址，外网可以访问</span></span><br><span class="line">protected-mode no <span class="comment"># 把yes改成no，允许外网访问</span></span><br><span class="line">daemonize yes <span class="comment"># 把no改成yes，后台运行</span></span><br><span class="line"></span><br><span class="line">./redis-server redis.conf<span class="comment">#此时就可以后台启动了</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/7a7b65420e334069bd3aeca8651aee70.png" alt="在这里插入图片描述"></p>
<ol>
<li>设置开机启动<br>添加开机启动服务<code>[root@localhost bin]# vi /etc/systemd/system/redis.service</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line"><span class="type">Type</span>=forking</span><br><span class="line">ExecStart=/usr/local/redis/<span class="built_in">bin</span>/redis-server /usr/local/redis/<span class="built_in">bin</span>/redis.conf<span class="comment">#改成自己redis.conf地址，不写的话后面报错</span></span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<ol>
<li>设置开机启动<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">bin</span>]<span class="comment"># systemctl daemon-reload</span></span><br><span class="line">[root@localhost <span class="built_in">bin</span>]<span class="comment"># systemctl start redis.service</span></span><br><span class="line">[root@localhost <span class="built_in">bin</span>]<span class="comment"># systemctl enable redis.service</span></span><br></pre></td></tr></table></figure>
其它服务操作命令：<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">systemctl start redis.service   <span class="comment">#启动redis服务</span></span><br><span class="line">systemctl stop redis.service   <span class="comment">#停止redis服务</span></span><br><span class="line">systemctl restart redis.service   <span class="comment">#重新启动服务</span></span><br><span class="line">systemctl status redis.service   <span class="comment">#查看服务当前状态</span></span><br><span class="line">systemctl enable redis.service   <span class="comment">#设置开机自启动</span></span><br><span class="line">systemctl disable redis.service   <span class="comment">#停止开机自启动</span></span><br></pre></td></tr></table></figure></li>
<li><p>创建 redis 命令软链接：<code>[root@localhost ~]# ln -s /usr/local/redis/bin/redis-cli /usr/bin/redis</code></p>
</li>
<li><p>连接 redis并退出：（按上面走完就ok了。不知道为啥redis -cli不行）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@<span class="number">192</span> <span class="built_in">bin</span>]<span class="comment"># redis</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ping</span><br><span class="line">PONG</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; quit</span><br><span class="line">[root@<span class="number">192</span> <span class="built_in">bin</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure></li>
<li>redis-cli 未找到命令的一个解决方式</li>
</ol>
<p>将redis解压后的安装文件redis-5.0.14下src目录里的redis-cli文件，复制到/usr/local/bin/路径中<br>[root@localhost redis-5.0.14]# cp src/redis-cli  /usr/local/bin/<br>现在就可以执行redis-cli命令了。</p>
<h2 id="六、redis操作命令"><a href="#六、redis操作命令" class="headerlink" title="六、redis操作命令"></a>六、redis操作命令</h2><p>具体操作参考<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/fun-rec/blob/master/docs/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98/2.2%E6%96%B0%E9%97%BB%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E5%AE%9E%E6%88%98/docs/2.2.1.3%20Redis%E5%9F%BA%E7%A1%80.md">《Redis基础.md》</a></p>
<ul>
<li>EXPIRE key_name seconds  :多少秒后名为key_name的key自动删除。key存在返回1，否则返回0。<br>127.0.0.1:6378&gt; set key1 “value”：string类型的key<br>127.0.0.1:6378&gt;  lpush key2 “value”：list类型key<br>127.0.0.1:6378&gt; SADD key3 “value”：set类型key</li>
<li>DEL key：删除key，可以是列表</li>
<li>TYPE key：查看key的类型</li>
</ul>
<p>Python调用Redis：<br>windows下安装redis库：<code>python -m pip install redis</code><br>centos下安装：<code>pip install redis</code></p>
<h2 id="七、MongoDB"><a href="#七、MongoDB" class="headerlink" title="七、MongoDB"></a>七、MongoDB</h2><h3 id="7-1-安装MongoDB"><a href="#7-1-安装MongoDB" class="headerlink" title="7.1 安装MongoDB"></a>7.1 安装MongoDB</h3><p>先安装libcurl 和openssl。</p>
<ol>
<li>yum命令出现Loaded plugins: fastestmirror Determining fastest mirrors 在进行yum安装的时候报错。参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/Me_find/article/details/110653042?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163948605316780274130394%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163948605316780274130394&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-110653042.pc_search_insert_es_download_v2&amp;utm_term=%E5%B7%B2%E5%8A%A0%E8%BD%BD%E6%8F%92%E4%BB%B6%EF%BC%9Afastestmirror&amp;spm=1018.2226.3001.4187">此文</a>进行修改。</li>
<li>[Errno 14] curl#6 - “Could not resolve host: mirrors.163.com； Unknown error“。参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/N199109/article/details/113175144?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163948646516780261960225%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163948646516780261960225&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-113175144.pc_search_insert_es_download_v2&amp;utm_term=Could%20not%20resolve%20host:%20mirrors.163.com;%20%E6%9C%AA%E7%9F%A5%E7%9A%84%E9%94%99%E8%AF%AF&amp;spm=1018.2226.3001.4187">此文</a></li>
</ol>
<p>然后直接<code>yum install libcurl  yum install openssl</code><br>一开始两个显示网站下载太慢尝试其它镜像，第三个网站顺利下载了。</p>
<p>at /etc/issue <a target="_blank" rel="noopener" href="https://blog.csdn.net/shuaigexiaobo/article/details/78030008?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163949014816780265412839%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=163949014816780265412839&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-78030008.pc_search_insert_es_download_v2&amp;utm_term=%E6%9F%A5%E7%9C%8Bcentos%E7%89%88%E6%9C%AC&amp;spm=1018.2226.3001.4187">查看centos版本</a>。然后在<a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/community">官网</a>下载。<br><img src="https://img-blog.csdnimg.cn/4d56ad46c01e4f6f98b49408a1f9b75a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA56We5rSb5Y2O,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>copy链接之后：<code>wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-5.0.5.tgz</code><br>解压：<code>tar -zxvf mongodb-linux-x86_64-rhel70-5.0.5.tgz</code><br>重命名<code>mv mongodb-linux-x86_64-rhel70-5.0.5 mongodb-5</code></p>
<p>可以将MongoDB 的可执行文件（bin目录下）添加到 PATH 路径中<code>export PATH=/usr/local/mongodb/bin:$PATH</code>（这步貌似是临时的，但是不执行mongod命令无法执行）<br>配置MongoDB，编辑etc下的profile文件，加入一句指令：<code>export PATH=$PATH:/usr/local/mongodb-5/bin</code>。配置完保存，之后将CentOS7关机重启。<br><img src="https://img-blog.csdnimg.cn/0b0c083d51f34046abdd703c9f993b6e.png" alt="在这里插入图片描述"></p>
<p>创建数据存储目录：<code>mkdir -p /var/lib/mongo</code><br>创建日志目录：<code>mkdir -p /var/log/mongodb</code></p>
<p>启动mongo服务：<code>mongod --dbpath /var/lib/mongo --logpath /var/log/mongodb/mongod.log --fork</code></p>
<p>通过 ps ax | grep mongod查看数据库启动情况，如下图表示启动成功：<br><img src="https://img-blog.csdnimg.cn/77391c2abd7f4c608af2b92a3f66c3dd.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>配置文件参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43317529/article/details/83033691?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163964441616780264030489%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=163964441616780264030489&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-83033691.pc_search_insert_es_download_v2&amp;utm_term=centos%E5%AE%89%E8%A3%85mongodb&amp;spm=1018.2226.3001.4187">帖子1</a>、<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_37027631/article/details/99934697?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=centos%E5%AE%89%E8%A3%85mongodb&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-4-99934697.pc_search_insert_es_download_v2&amp;spm=1018.2226.3001.4187">帖子2</a></p>
</blockquote>
<p>在usr/mongodb目录下新建一个名为mongodb.conf的配置文件，写入如下配置内容（不能有中文）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">port=<span class="number">27017</span></span><br><span class="line">dbpath=/var/lib/mongo</span><br><span class="line">logpath=/var/log/mongodb</span><br><span class="line">logappend=true</span><br><span class="line">fork=false</span><br><span class="line">maxConns=<span class="number">100</span></span><br><span class="line">noauth=true</span><br><span class="line">journal=true</span><br><span class="line">bind_ip = <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
<p>保存。然后输入命令启动<code>mongod --config /usr/local/mongodb-5/mongodb.conf</code></p>
<p>关闭mongodb服务通过ps ax | grep mongod命令查看mongodb运行的id<br><img src="https://img-blog.csdnimg.cn/890bf81dcb7a4899886c3e77f3ec1a4e.png" alt="在这里插入图片描述"><br>然后输入kill -9 进程id，杀死mongodb服务，如上图执行命令<br>保存。然后输入命令启动mongod —config /usr/local/mongodb-5/mongodb.conf</p>
<h3 id="7-2-Mongodb操作"><a href="#7-2-Mongodb操作" class="headerlink" title="7.2 Mongodb操作"></a>7.2 Mongodb操作</h3><h4 id="7-2-1-数据库"><a href="#7-2-1-数据库" class="headerlink" title="7.2.1 数据库"></a>7.2.1 数据库</h4><p><img src="https://img-blog.csdnimg.cn/9d92e4e368984efdb91a388cefa3b95a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA56We5rSb5Y2O,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<ul>
<li>“show dbs” ：显示所有数据的列表。</li>
<li>“db” ：显示当前数据库对象或集合。</li>
<li>“use”：连接到一个指定的数据库。</li>
<li>use 数据库名：创建数据库。刚创建的数据库 tobytest并不在数据库的列表中，需要插入数据。</li>
<li>db.tobytest.insert({“name”:”Toby”})：向数据库插入数据<h4 id="7-2-2-创建集合"><a href="#7-2-2-创建集合" class="headerlink" title="7.2.2 创建集合"></a>7.2.2 创建集合</h4></li>
<li><code>db.createCollection(name, options)</code>：创建集合</li>
<li><code>show collections 或 show tables</code> :查看集合</li>
<li><code>db.collection.drop()</code>：删除集合</li>
</ul>
<p>name: 要创建的集合名称<br>options: 可选参数, 指定有关内存大小及索引的选项</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db.createCollection(<span class="string">&quot;tobycollection&quot;</span>)</span><br><span class="line">db.tobycollection.drop()</span><br></pre></td></tr></table></figure>
<h4 id="7-2-3-插入文档"><a href="#7-2-3-插入文档" class="headerlink" title="7.2.3  插入文档"></a>7.2.3  插入文档</h4><p><code>db.COLLECTION_NAME.insert(document)</code>：插入文档<br><code>db.COLLECTION_NAME.save(document)</code>：插入文档</p>
<ul>
<li>save()：如果 _id 主键存在则更新数据，如果不存在就插入数据。该方法新版本中已废弃，可以使用 db.collection.insertOne() 或 db.collection.replaceOne() 来代替。</li>
<li>insert(): 若插入的数据主键已经存在，则会抛 org.springframework.dao.DuplicateKeyException 异常，提示主键重复，不保存当前数据。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db.col.insert(&#123;title:<span class="string">&#x27;Toby MongoDB&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>description:<span class="string">&#x27;this is MongoDB&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>tags:[<span class="string">&#x27;mongodb&#x27;</span>,<span class="string">&#x27;database&#x27;</span>,<span class="string">&#x27;NoSQL&#x27;</span>],</span><br><span class="line"><span class="meta">... </span>likes:<span class="number">1</span></span><br><span class="line"><span class="meta">... </span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#col 是我们的集合名，如果该集合不在该数据库中， MongoDB 会自动创建该集合并插入文档。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>更新文档</li>
<li>删除文档</li>
<li>查询文档</li>
<li>排序</li>
</ul>
<h3 id="7-3-Python-MongoDB"><a href="#7-3-Python-MongoDB" class="headerlink" title="7.3 Python MongoDB"></a>7.3 Python MongoDB</h3><p>Python 要连接 MongoDB 需要 MongoDB 驱动，这里我们使用 PyMongo 驱动来连接。<br>安装：<code>pip install pymongo</code></p>
<p>用vim打开一个空白文档，然后把已经复制的代码给粘贴进来，发现它有自动缩进功能，最终导致粘贴的文本一行比一行靠右，看起来乱成一团。比较快的解决办法是，在粘贴文档前，在命令行模式下，输入：<code>:set paste</code><br>编辑完后输入：<code>:set nopaste</code></p>
<h2 id="八、scrapy"><a href="#八、scrapy" class="headerlink" title="八、scrapy"></a>八、scrapy</h2><p>按照教程写的编辑好那些文件之后执行sh run<em>scrapy_sina.sh报错：<br>参考：[帖子](<a target="_blank" rel="noopener" href="https://blog.csdn.net/lmhlmh">https://blog.csdn.net/lmhlmh</a></em>/article/details/107135295?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163950211916780271576675%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163950211916780271576675&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-107135295.pc_search_insert_es_download_v2&amp;utm_term=Unknown%20command:%20crawl&amp;spm=1018.2226.3001.4187)<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Scrapy <span class="number">2.5</span><span class="number">.1</span> - no active project</span><br><span class="line">Unknown command: crawl</span><br></pre></td></tr></table></figure><br><code>no active project</code>：说明我的工程有问题。</p>
<p>于是去看了看目录结构。查了下手册。在使用命令行startproject的时候，会自动生成scrapy.cfg</p>
<p>问题就出在这里，别人的项目文件中只有代码，没有配置文件，于是自己找了一个配置文件scrapy.cfg<br><img src="https://img-blog.csdnimg.cn/b32e3a99203643f9846fce7c0ed15f9e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA56We5rSb5Y2O,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<ol>
<li>No module named ‘pymongo‘</li>
</ol>
<ul>
<li>这是因为我的centos有python2和3两个版本。执行py文件的时候要写python3 xx.py。而教程里面都是直接写python。</li>
<li>改动成python就可以执行python3操作：<ul>
<li>cd /usr/bin</li>
<li>备份原路径：mv python python.bak</li>
<li>python 链接到python3 ：ln -s python3 python</li>
<li>查看版本：python -V现在显示python3而不是2了</li>
<li>修改yum配置文件（yum要使用python2才可以运行）<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#以下两个配置文件最顶部的\#!/usr/bin/python修改为 #!/usr/bin/python2</span></span><br><span class="line">vim /usr/<span class="built_in">bin</span>/yum</span><br><span class="line">vim /usr/libexec/urlgrabber-ext-down</span><br></pre></td></tr></table></figure>
vim向下删除到文档结尾：dG<br>运行 sh run_scrapy_sina.sh显示没有库sinanews，将monitor_news.py的<code>from sinanews.settings import MONGO_HOST, MONGO_PORT, DB_NAME, COLLECTION_NAME</code>前面的sinanews.删除。</li>
</ul>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">zhxnlp</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zhxnlp.github.io/2021/12/14/12月组队学习：推荐系统/task1：新闻推荐系统项目搭建：数据库安装与使用/">https://zhxnlp.github.io/2021/12/14/12月组队学习：推荐系统/task1：新闻推荐系统项目搭建：数据库安装与使用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zhxnlp.github.io">zhxnlpのBlog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">推荐系统</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/12/16/12%E6%9C%88%E7%BB%84%E9%98%9F%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/task2%EF%BC%9A%E6%96%B0%E9%97%BB%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%EF%BC%9Acentos%E4%B8%8B%E5%89%8D%E7%AB%AF%E9%85%8D%E7%BD%AE/"><i class="fa fa-chevron-left">  </i><span>task2：新闻推荐系统项目搭建：centos下前端配置</span></a></div><div class="next-post pull-right"><a href="/2021/12/13/12%E6%9C%88%E7%BB%84%E9%98%9F%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/task0%EF%BC%9AFun-Rec%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%E8%A7%86%E9%A2%91%E8%AE%B2%E8%A7%A3/"><span>task0：Fun-Rec推荐系统视频讲解</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://img-blog.csdnimg.cn/ffe1f736be4548dc9101388503288e4d.png)"><div class="layout" id="footer"><div class="copyright">&copy;2021 - 2022 By zhxnlp</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/algolia.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>